{
  "id": "anthropic:tool_call:streaming",
  "description": "Streaming Anthropic Messages API with tool_use response",
  "request": {
    "method": "POST",
    "path": "/v1/messages"
  },
  "response": {
    "status": 200,
    "headers": {
      "content-type": "text/event-stream",
      "transfer-encoding": "chunked",
      "x-envoy-upstream-service-time": "1763",
      "x-robots-tag": "none"
    },
    "streaming": true,
    "chunks": [
      {
        "message": {
          "content": [],
          "id": "msg_018RcZYfKHgnv7WfvrrPUokJ",
          "model": "claude-sonnet-4-20250514",
          "role": "assistant",
          "stop_reason": null,
          "stop_sequence": null,
          "type": "message",
          "usage": {
            "cache_creation": {
              "ephemeral_1h_input_tokens": 0,
              "ephemeral_5m_input_tokens": 0
            },
            "cache_creation_input_tokens": 0,
            "cache_read_input_tokens": 0,
            "input_tokens": 430,
            "output_tokens": 3,
            "service_tier": "standard"
          }
        },
        "type": "message_start"
      },
      {
        "content_block": {
          "text": "",
          "type": "text"
        },
        "index": 0,
        "type": "content_block_start"
      },
      {
        "delta": {
          "text": "I'll get",
          "type": "text_delta"
        },
        "index": 0,
        "type": "content_block_delta"
      },
      {
        "delta": {
          "text": " the current weather in San Francisco for you",
          "type": "text_delta"
        },
        "index": 0,
        "type": "content_block_delta"
      },
      {
        "type": "ping"
      },
      {
        "delta": {
          "text": ".",
          "type": "text_delta"
        },
        "index": 0,
        "type": "content_block_delta"
      },
      {
        "index": 0,
        "type": "content_block_stop"
      },
      {
        "content_block": {
          "id": "toolu_01CrDpqCnCcENcbABqdJCQSt",
          "input": {},
          "name": "get_weather",
          "type": "tool_use"
        },
        "index": 1,
        "type": "content_block_start"
      },
      {
        "delta": {
          "partial_json": "",
          "type": "input_json_delta"
        },
        "index": 1,
        "type": "content_block_delta"
      },
      {
        "delta": {
          "partial_json": "{\"locati",
          "type": "input_json_delta"
        },
        "index": 1,
        "type": "content_block_delta"
      },
      {
        "delta": {
          "partial_json": "on\": \"San ",
          "type": "input_json_delta"
        },
        "index": 1,
        "type": "content_block_delta"
      },
      {
        "delta": {
          "partial_json": "Francisco,",
          "type": "input_json_delta"
        },
        "index": 1,
        "type": "content_block_delta"
      },
      {
        "delta": {
          "partial_json": " USA\"}",
          "type": "input_json_delta"
        },
        "index": 1,
        "type": "content_block_delta"
      },
      {
        "index": 1,
        "type": "content_block_stop"
      },
      {
        "delta": {
          "stop_reason": "tool_use",
          "stop_sequence": null
        },
        "type": "message_delta",
        "usage": {
          "cache_creation_input_tokens": 0,
          "cache_read_input_tokens": 0,
          "input_tokens": 430,
          "output_tokens": 69
        }
      },
      {
        "type": "message_stop"
      }
    ]
  }
}